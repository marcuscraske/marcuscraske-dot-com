<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <title> My Food Hygiene Ratings - Marcus Craske </title> <meta name="description" content="Personal blog, projects and things of Marcus Craske. Software engineer. Hack the planet!"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5, minimum-scale=1"> <meta name="HandheldFriendly" content="True" /> <meta property="og:site_name" content="Marcus Craske"> <meta property="og:type" content="website"> <meta property="og:title" content="Marcus Craske"> <meta property="og:description" content="Personal blog, projects and things of Marcus Craske. Software engineer. Hack the planet!"> <link rel="shortcut icon" href="/favicon.ico"> <link href='/assets/bundle-b6f140bba3d5d0dc1ca172d1fbff01bb.css' rel='stylesheet' type='text/css' /> <script src='/assets/bundle-d326fb47b9e7e5d81c260da8de38d879.js' type='text/javascript'></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-86993638-1', 'auto'); ga('send', 'pageview'); </script> </head> <body> <a id="skip-to-content" href="#main"> Skip to main content </a> <div class="wrapper-header"> <header> <h1> <a href="/"> Marcus Craske </a> </h1> <p> <a href="https://www.youtube.com/watch?v=Cipc8EowshY"> hack the planet<span class="terminal">|</span> </a> </p> </header> <nav> <ul> <li> <a href="/" > <span class="icon-home"></span> Home </a> </li> <li> <a href="/cv"> <span class="icon-file-text2"></span> Résumé / CV </a> </li> <li> <a href="/projects" class="selected" > <span class="icon-lab"></span> Projects </a> </li> <li> <a href="/links" > <span class="icon-books"></span> Links </a> </li> </ul> </nav> </div> <div class="wrapper"> <main id="main"> <article> <header> <time datetime="2023-04-04"> Apr 04, 2023 </time> <h1> <span class="icon icon-arrow"></span> My Food Hygiene Ratings </h1> </header> <p><a href="/assets/projects/my-food-hygiene-ratings/thumb.png"> <img alt="App icon" src="/assets/projects/my-food-hygiene-ratings/thumb.png" class="post-thumb" /> </a></p> <p>My hobby Android and iOS app to allow users to find hygiene ratings of establishments (restaurants, bars, shops etc).</p> <h2 id="download">Download</h2> <p> <a href="https://danksloth.com/apps/myfoodhygieneratings/">Product landing page</a>, under Dank Sloth Apps. </p> <p class="center"> <img src="/assets/projects/my-food-hygiene-ratings/app.png" /> </p> <p class="center"> <a href="https://apps.apple.com/us/app/my-food-hygiene-ratings/id1455030045?ls=1"> <img alt="Download on Apple Store" src="/assets/icons/apple-store-badge.png" class="app-store-badge" /> </a> <a href="https://play.google.com/store/apps/details?id=com.danksloth.food.hygiene.ratings"> <img alt="Download on Apple Store" src="/assets/icons/google-play-badge.png" class="app-store-badge" /> </a> </p> <h2 id="reasons--purpose">Reasons &amp; Purpose</h2> <p>Similar existing apps had poor UI and didn’t work well. I was also interested in the average rating for the largest chains in the UK. Around the same time, I had an interest in learning more about MongoDB and React Native, thus this seemed like a good fit.</p> <h2 id="backend">Backend</h2> <p>MongoDB is used to store information about each establishment: location, hygiene ratings, last inspection etc. The main reason for using Mongo was that I needed a high-performant persistence store for geospatial queries.</p> <p>Spring Boot is used to provide an API and backend for the mobile app:</p> <ul> <li><strong>Geospatial queries:</strong> the user’s location is sent, along with any search criteria, which is converted into a Mongo query using the Spring Data framework. Nearby establishments are sorted by distance and sent back.</li> <li><strong>Geo-encoding:</strong> the existing geo-encoding data for establishments, provided by the Food Standards Agency, is inaccurate, thus addresses are geo-encoded using a third-party service. The user can set their location using GPS (by default), or provide free-flow text (such as a city or post-code). In the latter, the text is geo-encoded and requests are cached using Spring Cache, with LRU (least recently used) storage.</li> <li><strong>Push notifications:</strong> users can select their favourite establishments, and receive a notification on their device when an establishment inspection changes. This is done using Google Firebase.</li> <li><strong>Telemetry:</strong> data is sent back by the mobile app: purchases made, purchases restored and in-app errors.</li> <li><strong>Bulk processing:</strong> data is pulled from the <a href="https://www.food.gov.uk">Food Standards Agency</a> website daily, with the average rating for the top 100 largest chains calculated.</li> </ul> <h2 id="frontend">Frontend</h2> <p>The mobile app is mostly written in JavaScript using the React Native framework, with state managed by Redux.</p> <p>This allows writing logic and UI once, shared across both Android and iOS. A lot of configuration is still required for each individual platform (SDKs/libraries, build process, push-notifications, permissions etc).</p> <p>Adverts are displayed to the user, with an in-app purchase available for <em>premium</em> to remove them.</p> <p>To see the latest screenshots: click the download buttons at the top of the page, which will show the app store listing.</p> <section id="comments"> <h2> Comments </h2> <script id="dsq-count-scr" src="//limpygnome-com.disqus.com/count.js" async></script> <div id="disqus_thread"></div> <script> var disqus_config = function () { this.page.url = PAGE_URL; this.page.identifier = PAGE_IDENTIFIER; }; (function() { var d = document, s = d.createElement('script'); s.src = '//limpygnome-com.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </section> </article> </main> </div> <footer> <p class="disclaimer"> Disclaimer: this is a personal blog, any opinions and actions are my own and do not represent my employer. </p> <ul> <li> <a href="https://opensource.org/licenses/MIT"> MIT License </a> </li> <li> <a href="https://www.w3.org/WAI/standards-guidelines/wcag"> WCAG 2.1 AA Friendly </a> </li> </ul> <p class="socials"> <a title="Github" href="https://www.github.com/marcuscraske"> Github </a> <a title="LinkedIn" href="http://www.linkedin.com/in/marcuscraske"> LinkedIn </a> <a title="Instagram" href="https://www.instagram.com/marcuscraske"> Instagram </a> <a title="Twitter" href="https://twitter.com/marcuscraske"> Twitter </a> <a title="Strava" href="https://www.strava.com/athletes/marcuscraske"> Strava </a> <a title="Mastodon" href="https://hachyderm.io/@marcuscraske" target="_blank"> Mastodon </a> <a title="E-mail" href="mailto:contact@marcuscraske.com" target="_blank"> E-mail </a> </p> </footer> <script type="text/javascript"> SyntaxHighlighter.all(); $('.blog').jscroll({ contentSelector: ".blog", nextSelector: ".next" }); </script> </body> </html>
